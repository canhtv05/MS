version: 2
updates:
  # ========================================
  # MAVEN - Backend Microservices
  # ========================================
  - package-ecosystem: 'maven'
    directory: '/' # Quét toàn bộ repo để tìm pom.xml trong các folder con
    schedule:
      interval: 'weekly'
    open-pull-requests-limit: 10
    # GOM NHÓM: Tất cả update Java/Maven sẽ vào 1 PR duy nhất
    groups:
      java-microservices:
        patterns:
          - '*'
    labels:
      - 'dependencies'
      - 'java'

  # ========================================
  # NPM - Frontend & Root Tools
  # ========================================
  - package-ecosystem: 'npm'
    directory: '/' # Root package (linting, formatting)
    schedule:
      interval: 'weekly'
    groups:
      root-tools:
        patterns:
          - '*'
    labels:
      - 'dependencies'
      - 'devtools'

  - package-ecosystem: 'npm'
    directory: '/web-client' # Next.js Frontend
    schedule:
      interval: 'weekly'
    groups:
      frontend-libs:
        patterns:
          - '*'
    labels:
      - 'dependencies'
      - 'frontend'
      - 'javascript'

  # ========================================
  # DOCKER & GITHUB ACTIONS
  # ========================================
  - package-ecosystem: 'docker'
    directory: '/.devcontainer'
    schedule:
      interval: 'weekly'
    labels:
      - 'dependencies'
      - 'docker'

  - package-ecosystem: 'github-actions'
    directory: '/'
    schedule:
      interval: 'weekly'
    labels:
      - 'dependencies'
      - 'ci'
